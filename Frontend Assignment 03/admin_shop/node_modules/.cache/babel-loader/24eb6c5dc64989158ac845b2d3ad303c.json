{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/thanhtu/Downloads/source_main/admin_shop/src/Products/Component/ViewEdit.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport ProductAPI from \"../../API/ProductAPI\";\nimport { useLocation } from \"react-router-dom\";\n\nfunction useQuery() {\n  _s();\n\n  const {\n    search\n  } = useLocation();\n  return React.useMemo(() => new URLSearchParams(search), [search]);\n}\n\n_s(useQuery, \"I+9F+Vhfmc3otMLqUKFlYflxhf8=\", false, function () {\n  return [useLocation];\n});\n\nconst ViewEdit = () => {\n  _s2();\n\n  const productId = useQuery().get('id');\n  const [product, setProduct] = useState({});\n  const [categoires, setCategories] = useState([]);\n  useEffect(() => {\n    (async () => {\n      const res = await ProductAPI.getCategories();\n\n      if ((res === null || res === void 0 ? void 0 : res.length) > 0) {\n        setCategories(res);\n      }\n    })();\n\n    if (productId) {\n      (async () => {\n        const res = await ProductAPI.getDetail(productId);\n\n        if (res._id) {\n          setProduct({ ...res\n          });\n        }\n      })();\n    }\n  }, []);\n\n  const handleCreateProduct = async () => {\n    if (!productId) {\n      if (!(product === null || product === void 0 ? void 0 : product.file)) return;\n    }\n\n    const formData = new FormData();\n    Object.keys(product).forEach(item => {\n      formData.append(item, product[item]);\n    });\n\n    if (productId) {\n      const res = await ProductAPI.updateProduct(productId, formData);\n\n      if (res === null || res === void 0 ? void 0 : res._id) {\n        window.location.href = '/products';\n      }\n    } else if (!productId) {\n      const res = await ProductAPI.createProduct(formData);\n\n      if (res === null || res === void 0 ? void 0 : res._id) {\n        setProduct({});\n      }\n    }\n  };\n\n  const onSelectImage = e => {\n    if (e.target.files[0]) {\n      setProduct({ ...product,\n        file: e.target.files[0]\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-breadcrumb\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-7 align-self-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"page-title text-truncate text-dark font-weight-medium mb-1\",\n            children: \"Create Product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex align-items-center\",\n            children: /*#__PURE__*/_jsxDEV(\"nav\", {\n              \"aria-label\": \"breadcrumb\",\n              children: /*#__PURE__*/_jsxDEV(\"ol\", {\n                className: \"breadcrumb m-0 p-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"breadcrumb-item\",\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: \"/\",\n                    className: \"text-muted\",\n                    children: \"Home\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 69,\n                    columnNumber: 69\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"breadcrumb-item text-muted active\",\n                  \"aria-current\": \"page\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 70,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            style: {\n              paddingTop: '1.5rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                margin: '0 1.5rem 1.5rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"card-title\",\n                children: \"Name Product\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  onChange: e => setProduct({ ...product,\n                    ['name']: e.target.value\n                  }),\n                  value: (product === null || product === void 0 ? void 0 : product.name) || '',\n                  className: \"form-control w-50\",\n                  type: \"text\",\n                  placeholder: \"Enter Name Product!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                margin: '0 1.5rem 1.5rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"card-title\",\n                children: \"Price Product\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  onChange: e => setProduct({ ...product,\n                    ['price']: e.target.value\n                  }),\n                  value: (product === null || product === void 0 ? void 0 : product.price) || '',\n                  className: \"form-control w-50\",\n                  type: \"text\",\n                  placeholder: \"Enter Price Product!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                margin: '0 1.5rem 1.5rem'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                onChange: onSelectImage,\n                multiple: true,\n                id: \"file-image\",\n                class: \"product-file__upload-btn\",\n                placeholder: \"T\\u1EA3i h\\xECnh \\u1EA3nh\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                margin: '0 1.5rem 1.5rem'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"card-title\",\n                children: \"Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between\",\n                children: /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: (product === null || product === void 0 ? void 0 : product.category) || '',\n                  onChange: e => setProduct({ ...product,\n                    ['category']: e.target.value\n                  }),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Choose Category\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 41\n                  }, this), (categoires === null || categoires === void 0 ? void 0 : categoires.length) && categoires.map(item => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: item._id,\n                    children: item === null || item === void 0 ? void 0 : item.category\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 49\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex\",\n              style: {\n                margin: '0 1.5rem 1.5rem'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                disabled: !(product === null || product === void 0 ? void 0 : product.name) || !(product === null || product === void 0 ? void 0 : product.price) || !(product === null || product === void 0 ? void 0 : product.category),\n                onClick: handleCreateProduct,\n                style: {\n                  cursor: 'pointer',\n                  color: 'white'\n                },\n                className: \"btn btn-success\",\n                children: productId ? 'Update Product' : 'Create Product'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"footer text-center text-muted\",\n      children: [\"All Rights Reserved by Adminmart. Designed and Developed by \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"https://www.facebook.com/KimTien.9920/\",\n        children: \"Ti\\u1EC1n Kim\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 77\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(ViewEdit, \"Av7cTWsxJQjXTFNAnAKbn3vjrk0=\", false, function () {\n  return [useQuery];\n});\n\n_c = ViewEdit;\nexport default ViewEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewEdit\");","map":{"version":3,"sources":["/Users/thanhtu/Downloads/source_main/admin_shop/src/Products/Component/ViewEdit.jsx"],"names":["React","useEffect","useState","ProductAPI","useLocation","useQuery","search","useMemo","URLSearchParams","ViewEdit","productId","get","product","setProduct","categoires","setCategories","res","getCategories","length","getDetail","_id","handleCreateProduct","file","formData","FormData","Object","keys","forEach","item","append","updateProduct","window","location","href","createProduct","onSelectImage","e","target","files","paddingTop","margin","value","name","price","category","map","cursor","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport ProductAPI from \"../../API/ProductAPI\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nfunction useQuery() {\r\n    const { search } = useLocation();\r\n    return React.useMemo(() => new URLSearchParams(search), [search]);\r\n}\r\n\r\nconst ViewEdit = () => {\r\n\r\n    const productId = useQuery().get('id');\r\n    const [product, setProduct] = useState({});\r\n    const [categoires, setCategories] = useState([]);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            const res = await ProductAPI.getCategories();\r\n            if (res?.length > 0) {\r\n                setCategories(res);\r\n            }\r\n        })();\r\n        if (productId) {\r\n            (async () => {\r\n                const res = await ProductAPI.getDetail(productId);\r\n                if (res._id) {\r\n                    setProduct({...res});\r\n                }\r\n            })();\r\n        }\r\n    }, [])\r\n\r\n    const handleCreateProduct = async () => {\r\n        if (!productId) {\r\n            if (!product?.file) return;\r\n        }\r\n        const formData = new FormData();\r\n        Object.keys(product).forEach(item => {\r\n            formData.append(item, product[item]);\r\n        })\r\n        if (productId) {\r\n            const res = await ProductAPI.updateProduct(productId, formData);\r\n            if (res?._id) {\r\n                window.location.href = '/products';\r\n            }\r\n        } else if (!productId) {\r\n            const res = await ProductAPI.createProduct(formData);\r\n            if (res?._id) {\r\n                setProduct({});\r\n            }\r\n        }\r\n    }\r\n\r\n    const onSelectImage = (e) => {\r\n        if (e.target.files[0]) {\r\n            setProduct({...product, file: e.target.files[0]});\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"page-wrapper\">\r\n            <div className=\"page-breadcrumb\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-7 align-self-center\">\r\n                        <h4 className=\"page-title text-truncate text-dark font-weight-medium mb-1\">Create Product</h4>\r\n                        <div className=\"d-flex align-items-center\">\r\n                            <nav aria-label=\"breadcrumb\">\r\n                                <ol className=\"breadcrumb m-0 p-0\">\r\n                                    <li className=\"breadcrumb-item\"><a href=\"/\" className=\"text-muted\">Home</a></li>\r\n                                    <li className=\"breadcrumb-item text-muted active\" aria-current=\"page\"></li>\r\n                                </ol>\r\n                            </nav>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-12\">\r\n                        <div className=\"card\" style={{ paddingTop: '1.5rem' }}>\r\n                            <div style={{ margin: '0 1.5rem 1.5rem' }}>\r\n                                <h5 className=\"card-title\">Name Product</h5>\r\n                                <div className='d-flex justify-content-between'>\r\n                                    <input\r\n                                        onChange={(e) => setProduct({ ...product, ['name']: e.target.value })}\r\n                                        value={product?.name || ''}\r\n                                        className=\"form-control w-50\"\r\n                                        type=\"text\"\r\n                                        placeholder=\"Enter Name Product!\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div style={{ margin: '0 1.5rem 1.5rem' }}>\r\n                                <h5 className=\"card-title\">Price Product</h5>\r\n                                <div className='d-flex justify-content-between'>\r\n                                    <input\r\n                                        onChange={(e) => setProduct({ ...product, ['price']: e.target.value })}\r\n                                        value={product?.price || ''}\r\n                                        className=\"form-control w-50\"\r\n                                        type=\"text\"\r\n                                        placeholder=\"Enter Price Product!\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            {/* <div style={{ margin: '0 1.5rem 1.5rem' }}>\r\n                                <h5 className=\"card-title\">Image 1</h5>\r\n                                <div className='d-flex justify-content-between'>\r\n                                    <input\r\n                                        onChange={(e) => setProduct({ ...product, ['img1']: e.target.value })}\r\n                                        value={product?.img1 || ''}\r\n                                        className=\"form-control w-50\"\r\n                                        type=\"text\"\r\n                                        placeholder=\"Enter Image 1 Product!\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div style={{ margin: '0 1.5rem 1.5rem' }}>\r\n                                <h5 className=\"card-title\">Image 2</h5>\r\n                                <div className='d-flex justify-content-between'>\r\n                                    <input\r\n                                        onChange={(e) => setProduct({ ...product, ['img2']: e.target.value })}\r\n                                        value={product?.img2 || ''}\r\n                                        className=\"form-control w-50\"\r\n                                        type=\"text\"\r\n                                        placeholder=\"Enter Image 2 Product!\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div style={{ margin: '0 1.5rem 1.5rem' }}>\r\n                                <h5 className=\"card-title\">Image 3</h5>\r\n                                <div className='d-flex justify-content-between'>\r\n                                    <input\r\n                                        onChange={(e) => setProduct({ ...product, ['img3']: e.target.value })}\r\n                                        value={product?.img3 || ''}\r\n                                        className=\"form-control w-50\"\r\n                                        type=\"text\"\r\n                                        placeholder=\"Enter Image 3 Product!\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div style={{ margin: '0 1.5rem 1.5rem' }}>\r\n                                <h5 className=\"card-title\">Image 4</h5>\r\n                                <div className='d-flex justify-content-between'>\r\n                                    <input\r\n                                        onChange={(e) => setProduct({ ...product, ['img4']: e.target.value })}\r\n                                        value={product?.img4 || ''}\r\n                                        className=\"form-control w-50\"\r\n                                        type=\"text\"\r\n                                        placeholder=\"Enter Image 4 Product!\"\r\n                                    />\r\n                                </div>\r\n                            </div> */}\r\n\r\n                            <div style={{ margin: '0 1.5rem 1.5rem' }}>\r\n                                <input \r\n                                    type=\"file\" \r\n                                    onChange={onSelectImage}\r\n                                    multiple\r\n                                    id=\"file-image\"\r\n                                    class=\"product-file__upload-btn\"\r\n                                    placeholder=\"Tải hình ảnh\"\r\n                                />\r\n                            </div>\r\n                            <div style={{ margin: '0 1.5rem 1.5rem' }}>\r\n                                <h5 className=\"card-title\">Category</h5>\r\n                                <div className='d-flex justify-content-between'>\r\n                                    <select value={product?.category || ''} onChange={(e) => setProduct({ ...product, ['category']: e.target.value })}>\r\n                                        <option value=\"\">Choose Category</option>\r\n                                        {\r\n                                            categoires?.length && categoires.map(item => \r\n                                                <option value={item._id}>{item?.category}</option>\r\n                                            )\r\n                                        }\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"d-flex\" style={{ margin: '0 1.5rem 1.5rem' }}>\r\n                                <button\r\n                                    disabled={\r\n                                        !product?.name || !product?.price || !product?.category\r\n                                    }\r\n                                    onClick={handleCreateProduct}\r\n                                    style={{ cursor: 'pointer', color: 'white' }}\r\n                                    className='btn btn-success'>\r\n                                    {productId ? 'Update Product' : 'Create Product'}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <footer className=\"footer text-center text-muted\">\r\n                All Rights Reserved by Adminmart. Designed and Developed by <a\r\n                    href=\"https://www.facebook.com/KimTien.9920/\">Tiền Kim</a>.\r\n            </footer>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ViewEdit;"]},"metadata":{},"sourceType":"module"}
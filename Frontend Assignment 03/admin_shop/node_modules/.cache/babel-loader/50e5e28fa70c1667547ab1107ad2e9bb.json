{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/src/Products/Products.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport queryString from \"query-string\";\nimport ProductAPI from \"../API/ProductAPI\";\nimport Pagination from \"./Component/Pagination\";\nimport { Link } from \"react-router-dom\";\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from \"reactstrap\";\n\nfunction Products(props) {\n  _s();\n\n  const [products, setProducts] = useState([]);\n  const [temp, setTemp] = useState([]);\n  const [total, setTotal] = useState([]);\n  const [results, setResults] = useState('');\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\n  const [productToDeleteId, setProductToDeleteId] = useState(\"\");\n\n  const toggleDeleteModal = () => {\n    setIsDeleteModalOpen(!isDeleteModalOpen);\n  };\n\n  const handleDeleteClick = productId => {\n    setProductToDeleteId(productId);\n    toggleDeleteModal();\n  };\n\n  const confirmDelete = async () => {\n    const deleteproduct = await ProductAPI.delete(productToDeleteId); // Sau khi xóa thành công, bạn có thể cập nhật lại danh sách sản phẩm hoặc thực hiện các tương tác khác\n\n    toggleDeleteModal();\n  };\n\n  const [pagination, setPagination] = useState({\n    page: \"1\",\n    count: \"8\",\n    search: \"\",\n    category: \"all\"\n  });\n\n  const onChangeText = e => {\n    const value = e.target.value;\n\n    if (!value) {\n      setProducts(temp);\n      return;\n    }\n\n    const searchProducts = temp.filter(item => item.name.toUpperCase().indexOf(value.toUpperCase()) !== -1);\n    setProducts(searchProducts);\n  }; //Tổng số trang\n\n\n  const [totalPage, setTotalPage] = useState(); //Hàm này dùng để thay đổi state pagination.page\n  //Nó sẽ truyền xuống Component con và nhận dữ liệu từ Component con truyền lên\n\n  const handlerChangePage = value => {\n    console.log(\"value\", value);\n    setPagination({\n      page: value,\n      count: pagination.count,\n      category: pagination.category\n    });\n  };\n\n  useEffect(() => {\n    const fetchAllData = async () => {\n      // Nếu mà category === 'all' thì nó sẽ gọi hàm get tất cả sản phẩm\n      // Ngược lại thì nó sẽ gọi hàm pagination và phân loại sản phẩm\n      const params = {\n        page: pagination.page,\n        count: pagination.count,\n        search: pagination.search,\n        category: pagination.category\n      };\n      const query = queryString.stringify(params);\n      const newQuery = \"?\" + query;\n      const products = await ProductAPI.getPagination(newQuery);\n      setProducts(products.data.products);\n      setTemp(products.data.products);\n      console.log(products); // setPagination.page(products)\n      //Tính tổng số trang = tổng số sản phẩm / số lượng sản phẩm 1 trang\n\n      const totalPa = Math.ceil(parseInt(products.data.products.length) / parseInt(pagination.count)) + 1;\n      setTotalPage(totalPa);\n    };\n\n    fetchAllData();\n  }, [pagination]);\n  console.log(totalPage);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-breadcrumb\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-7 align-self-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"page-title text-truncate text-dark font-weight-medium mb-1\",\n            children: \"Basic Initialisation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex align-items-center\",\n            children: /*#__PURE__*/_jsxDEV(\"nav\", {\n              \"aria-label\": \"breadcrumb\",\n              children: /*#__PURE__*/_jsxDEV(\"ol\", {\n                className: \"breadcrumb m-0 p-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"breadcrumb-item\",\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: \"/\",\n                    className: \"text-muted\",\n                    children: \"Home\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 109,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"breadcrumb-item text-muted active\",\n                  \"aria-current\": \"page\",\n                  children: \"Table\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"card-title\",\n                children: \"Products\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-control w-25\",\n                  onChange: onChangeText,\n                  type: \"text\",\n                  placeholder: \"Enter Search!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"/new\",\n                  style: {\n                    cursor: \"pointer\",\n                    color: \"white\"\n                  },\n                  className: \"btn btn-success\",\n                  children: \"Create Product\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"table-responsive\",\n                children: [/*#__PURE__*/_jsxDEV(\"table\", {\n                  className: \"table table-striped table-bordered no-wrap\",\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"ID\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 152,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Name\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 153,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Price\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 154,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Image\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 155,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Category\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 156,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Edit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 157,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 151,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: products && (products === null || products === void 0 ? void 0 : products.map(value => /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: value._id\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 164,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: value.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 165,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: value.price\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 166,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: value.img1.startsWith(\"http\") ? /*#__PURE__*/_jsxDEV(\"img\", {\n                          src: value.img1,\n                          style: {\n                            height: \"60px\",\n                            width: \"60px\"\n                          },\n                          alt: \"\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 169,\n                          columnNumber: 33\n                        }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                          src: `http://localhost:5001/${value.img1}`,\n                          style: {\n                            height: \"60px\",\n                            width: \"60px\"\n                          },\n                          alt: \"\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 175,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 167,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: value.category\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 182,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                          href: `/products/view-edit/${value._id}`,\n                          style: {\n                            cursor: \"pointer\",\n                            color: \"white\"\n                          },\n                          className: \"btn btn-success\",\n                          children: \"Update\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 184,\n                          columnNumber: 31\n                        }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"a\", {\n                          onClick: () => handleDeleteClick(value._id) // Sử dụng hàm xử lý xóa khi nhấp vào nút \"Delete\"\n                          ,\n                          style: {\n                            cursor: \"pointer\",\n                            color: \"white\"\n                          },\n                          className: \"btn btn-danger\",\n                          children: \"Delete\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 192,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 183,\n                        columnNumber: 29\n                      }, this)]\n                    }, value._id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 163,\n                      columnNumber: 27\n                    }, this)))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n                  pagination: pagination,\n                  handlerChangePage: handlerChangePage,\n                  totalPage: totalPage\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isDeleteModalOpen,\n      toggle: toggleDeleteModal,\n      children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n        toggle: toggleDeleteModal,\n        children: \"Confirm Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n        children: \"Are you sure you want to delete this product?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          color: \"danger\",\n          onClick: confirmDelete,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          color: \"secondary\",\n          onClick: toggleDeleteModal,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"footer text-center text-muted\",\n      children: [\"All Rights Reserved by Adminmart. Designed and Developed by\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"https://www.facebook.com/KimTien.9920/\",\n        children: \"Ti\\u1EC1n Kim\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Products, \"LYjBrK2WlIrm6JvN+htqp34UIjk=\");\n\n_c = Products;\nexport default Products;\n\nvar _c;\n\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"sources":["/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/src/Products/Products.jsx"],"names":["React","useEffect","useState","queryString","ProductAPI","Pagination","Link","Modal","ModalHeader","ModalBody","ModalFooter","Button","Products","props","products","setProducts","temp","setTemp","total","setTotal","results","setResults","isDeleteModalOpen","setIsDeleteModalOpen","productToDeleteId","setProductToDeleteId","toggleDeleteModal","handleDeleteClick","productId","confirmDelete","deleteproduct","delete","pagination","setPagination","page","count","search","category","onChangeText","e","value","target","searchProducts","filter","item","name","toUpperCase","indexOf","totalPage","setTotalPage","handlerChangePage","console","log","fetchAllData","params","query","stringify","newQuery","getPagination","data","totalPa","Math","ceil","parseInt","length","cursor","color","map","_id","price","img1","startsWith","height","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport queryString from \"query-string\";\r\nimport ProductAPI from \"../API/ProductAPI\";\r\nimport Pagination from \"./Component/Pagination\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from \"reactstrap\";\r\n\r\nfunction Products(props) {\r\n  const [products, setProducts] = useState([]);\r\n  const [temp, setTemp] = useState([]);\r\n  const [total, setTotal] = useState([]);\r\n  const [results, setResults] = useState('')\r\n\r\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n  const [productToDeleteId, setProductToDeleteId] = useState(\"\");\r\n\r\n  const toggleDeleteModal = () => {\r\n    setIsDeleteModalOpen(!isDeleteModalOpen);\r\n  };\r\n\r\n  const handleDeleteClick = (productId) => {\r\n    setProductToDeleteId(productId);\r\n    toggleDeleteModal();\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    const deleteproduct = await ProductAPI.delete(productToDeleteId);\r\n    // Sau khi xóa thành công, bạn có thể cập nhật lại danh sách sản phẩm hoặc thực hiện các tương tác khác\r\n    toggleDeleteModal();\r\n  };\r\n\r\n  const [pagination, setPagination] = useState({\r\n    page: \"1\",\r\n    count: \"8\",\r\n    search: \"\",\r\n    category: \"all\",\r\n  });\r\n\r\n  const onChangeText = (e) => {\r\n    const value = e.target.value;\r\n    if (!value) {\r\n      setProducts(temp);\r\n      return;\r\n    }\r\n    const searchProducts = temp.filter(\r\n      (item) => item.name.toUpperCase().indexOf(value.toUpperCase()) !== -1\r\n    );\r\n    setProducts(searchProducts);\r\n  };\r\n\r\n  //Tổng số trang\r\n  const [totalPage, setTotalPage] = useState();\r\n\r\n  //Hàm này dùng để thay đổi state pagination.page\r\n  //Nó sẽ truyền xuống Component con và nhận dữ liệu từ Component con truyền lên\r\n  const handlerChangePage = (value) => {\r\n    console.log(\"value\", value);\r\n    setPagination({\r\n      page: value,\r\n      count: pagination.count,\r\n      category: pagination.category,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchAllData = async () => {\r\n      // Nếu mà category === 'all' thì nó sẽ gọi hàm get tất cả sản phẩm\r\n      // Ngược lại thì nó sẽ gọi hàm pagination và phân loại sản phẩm\r\n      const params = {\r\n        page: pagination.page,\r\n        count: pagination.count,\r\n        search: pagination.search,\r\n        category: pagination.category,\r\n      };\r\n\r\n      const query = queryString.stringify(params);\r\n\r\n      const newQuery = \"?\" + query;\r\n\r\n      const products = await ProductAPI.getPagination(newQuery);\r\n      setProducts(products.data.products);\r\n      setTemp(products.data.products);\r\n      console.log(products);\r\n      // setPagination.page(products)\r\n\r\n      //Tính tổng số trang = tổng số sản phẩm / số lượng sản phẩm 1 trang\r\n\r\n      const totalPa = Math.ceil(\r\n        parseInt(products.data.products.length) / parseInt(pagination.count)\r\n      ) + 1;\r\n      setTotalPage(totalPa);\r\n    };\r\n    fetchAllData();\r\n  }, [pagination]);\r\n  console.log(totalPage);\r\n\r\n  return (\r\n    <div className=\"page-wrapper\">\r\n      <div className=\"page-breadcrumb\">\r\n        <div className=\"row\">\r\n          <div className=\"col-7 align-self-center\">\r\n            <h4 className=\"page-title text-truncate text-dark font-weight-medium mb-1\">\r\n              Basic Initialisation\r\n            </h4>\r\n            <div className=\"d-flex align-items-center\">\r\n              <nav aria-label=\"breadcrumb\">\r\n                <ol className=\"breadcrumb m-0 p-0\">\r\n                  <li className=\"breadcrumb-item\">\r\n                    <a href=\"/\" className=\"text-muted\">\r\n                      Home\r\n                    </a>\r\n                  </li>\r\n                  <li\r\n                    className=\"breadcrumb-item text-muted active\"\r\n                    aria-current=\"page\"\r\n                  >\r\n                    Table\r\n                  </li>\r\n                </ol>\r\n              </nav>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row\">\r\n          <div className=\"col-12\">\r\n            <div className=\"card\">\r\n              <div className=\"card-body\">\r\n                <h4 className=\"card-title\">Products</h4>\r\n                <div className=\"d-flex justify-content-between\">\r\n                  <input\r\n                    className=\"form-control w-25\"\r\n                    onChange={onChangeText}\r\n                    type=\"text\"\r\n                    placeholder=\"Enter Search!\"\r\n                  />\r\n                  <a\r\n                    href={\"/new\"}\r\n                    style={{ cursor: \"pointer\", color: \"white\" }}\r\n                    className=\"btn btn-success\"\r\n                  >\r\n                    Create Product\r\n                  </a>\r\n                </div>\r\n\r\n                <br />\r\n                <div className=\"table-responsive\">\r\n                  <table className=\"table table-striped table-bordered no-wrap\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>ID</th>\r\n                        <th>Name</th>\r\n                        <th>Price</th>\r\n                        <th>Image</th>\r\n                        <th>Category</th>\r\n                        <th>Edit</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {products &&\r\n                        products?.map((value) => (\r\n                          <tr key={value._id}>\r\n                            <td>{value._id}</td>\r\n                            <td>{value.name}</td>\r\n                            <td>{value.price}</td>\r\n                            <td>\r\n                              {value.img1.startsWith(\"http\") ? (\r\n                                <img\r\n                                  src={value.img1}\r\n                                  style={{ height: \"60px\", width: \"60px\" }}\r\n                                  alt=\"\"\r\n                                />\r\n                              ) : (\r\n                                <img\r\n                                  src={`http://localhost:5001/${value.img1}`}\r\n                                  style={{ height: \"60px\", width: \"60px\" }}\r\n                                  alt=\"\"\r\n                                />\r\n                              )}\r\n                            </td>\r\n                            <td>{value.category}</td>\r\n                            <td>\r\n                              <a\r\n                                href={`/products/view-edit/${value._id}`}\r\n                                style={{ cursor: \"pointer\", color: \"white\" }}\r\n                                className=\"btn btn-success\"\r\n                              >\r\n                                Update\r\n                              </a>\r\n                              &nbsp;\r\n                              <a\r\n                                onClick={() => handleDeleteClick(value._id)} // Sử dụng hàm xử lý xóa khi nhấp vào nút \"Delete\"\r\n                                style={{\r\n                                  cursor: \"pointer\",\r\n                                  color: \"white\",\r\n                                }}\r\n                                className=\"btn btn-danger\"\r\n                              >\r\n                                Delete\r\n                              </a>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                    </tbody>\r\n                  </table>\r\n                  <Pagination\r\n                    pagination={pagination}\r\n                    handlerChangePage={handlerChangePage}\r\n                    totalPage={totalPage}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Modal isOpen={isDeleteModalOpen} toggle={toggleDeleteModal}>\r\n        <ModalHeader toggle={toggleDeleteModal}>Confirm Delete</ModalHeader>\r\n        <ModalBody>Are you sure you want to delete this product?</ModalBody>\r\n        <ModalFooter>\r\n          <Button color=\"danger\" onClick={confirmDelete}>\r\n            Delete\r\n          </Button>\r\n          <Button color=\"secondary\" onClick={toggleDeleteModal}>\r\n            Cancel\r\n          </Button>\r\n        </ModalFooter>\r\n      </Modal>\r\n      <footer className=\"footer text-center text-muted\">\r\n        All Rights Reserved by Adminmart. Designed and Developed by{\" \"}\r\n        <a href=\"https://www.facebook.com/KimTien.9920/\">Tiền Kim</a>.\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Products;\r\n"]},"metadata":{},"sourceType":"module"}
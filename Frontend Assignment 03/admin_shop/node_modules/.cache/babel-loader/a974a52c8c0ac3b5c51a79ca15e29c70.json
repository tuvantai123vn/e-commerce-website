{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/src/Products/Products.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport queryString from \"query-string\";\nimport ProductAPI from \"../API/ProductAPI\";\nimport Pagination from \"./Component/Pagination\";\nimport { Link } from \"react-router-dom\";\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\n\nfunction Products(props) {\n  _s();\n\n  const [products, setProducts] = useState([]);\n  const [temp, setTemp] = useState([]);\n  const [total, setTotal] = useState([]);\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\n  const [productToDeleteId, setProductToDeleteId] = useState('');\n\n  const toggleDeleteModal = () => {\n    setIsDeleteModalOpen(!isDeleteModalOpen);\n  };\n\n  const handleDeleteClick = productId => {\n    setProductToDeleteId(productId);\n    toggleDeleteModal();\n  };\n\n  const confirmDelete = async () => {\n    const deleteproduct = await ProductAPI.delete(productToDeleteId); // Sau khi xóa thành công, bạn có thể cập nhật lại danh sách sản phẩm hoặc thực hiện các tương tác khác\n\n    toggleDeleteModal();\n  };\n\n  const [pagination, setPagination] = useState({\n    page: \"1\",\n    count: \"8\",\n    search: \"\",\n    category: \"all\"\n  });\n\n  const onChangeText = e => {\n    const value = e.target.value;\n\n    if (!value) {\n      setProducts(temp);\n      return;\n    }\n\n    const searchProducts = temp.filter(item => item.name.toUpperCase().indexOf(value.toUpperCase()) !== -1);\n    setProducts(searchProducts);\n  }; //Tổng số trang\n\n\n  const [totalPage, setTotalPage] = useState(); //Hàm này dùng để thay đổi state pagination.page\n  //Nó sẽ truyền xuống Component con và nhận dữ liệu từ Component con truyền lên\n\n  const handlerChangePage = value => {\n    setPagination({\n      page: value,\n      count: pagination.count,\n      category: pagination.category\n    });\n  };\n\n  useEffect(() => {\n    const fetchAllData = async () => {\n      // Nếu mà category === 'all' thì nó sẽ gọi hàm get tất cả sản phẩm\n      // Ngược lại thì nó sẽ gọi hàm pagination và phân loại sản phẩm\n      const params = {\n        page: pagination.page,\n        count: pagination.count,\n        search: pagination.search,\n        category: pagination.category\n      };\n      const query = queryString.stringify(params);\n      const newQuery = \"?\" + query;\n      const products = await ProductAPI.getPagination(newQuery);\n      setProducts(products.data.products);\n      setTemp(products.data.products);\n      setTotal(products.data.products); //Tính tổng số trang = tổng số sản phẩm / số lượng sản phẩm 1 trang\n\n      co;\n      const totalPage = Math.ceil(parseInt(total) / parseInt(pagination.count));\n      setTotalPage(totalPage);\n    };\n\n    fetchAllData();\n  }, [pagination]);\n  console.log(totalPage);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-breadcrumb\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-7 align-self-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"page-title text-truncate text-dark font-weight-medium mb-1\",\n            children: \"Basic Initialisation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex align-items-center\",\n            children: /*#__PURE__*/_jsxDEV(\"nav\", {\n              \"aria-label\": \"breadcrumb\",\n              children: /*#__PURE__*/_jsxDEV(\"ol\", {\n                className: \"breadcrumb m-0 p-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"breadcrumb-item\",\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    href: \"/\",\n                    className: \"text-muted\",\n                    children: \"Home\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 105,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"breadcrumb-item text-muted active\",\n                  \"aria-current\": \"page\",\n                  children: \"Table\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"card-title\",\n                children: \"Products\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex justify-content-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-control w-25\",\n                  onChange: onChangeText,\n                  type: \"text\",\n                  placeholder: \"Enter Search!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: \"/products/view-edit\",\n                  style: {\n                    cursor: \"pointer\",\n                    color: \"white\"\n                  },\n                  className: \"btn btn-success\",\n                  children: \"Create Product\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"table-responsive\",\n                children: [/*#__PURE__*/_jsxDEV(\"table\", {\n                  className: \"table table-striped table-bordered no-wrap\",\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"ID\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 148,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Name\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 149,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Price\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 150,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Image\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 151,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Category\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 152,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Edit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 153,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: products && (products === null || products === void 0 ? void 0 : products.map(value => /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        children: value._id\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 160,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: value.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 161,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: value.price\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 162,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"img\", {\n                          src: value.img1,\n                          style: {\n                            height: \"60px\",\n                            width: \"60px\"\n                          },\n                          alt: \"\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 164,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 163,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: value.category\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 170,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                          href: `/products/view-edit/${value._id}`,\n                          style: {\n                            cursor: \"pointer\",\n                            color: \"white\"\n                          },\n                          className: \"btn btn-success\",\n                          children: \"Update\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 172,\n                          columnNumber: 31\n                        }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"a\", {\n                          onClick: () => handleDeleteClick(value._id) // Sử dụng hàm xử lý xóa khi nhấp vào nút \"Delete\"\n                          ,\n                          style: {\n                            cursor: \"pointer\",\n                            color: \"white\"\n                          },\n                          className: \"btn btn-danger\",\n                          children: \"Delete\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 180,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 171,\n                        columnNumber: 29\n                      }, this)]\n                    }, value._id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 159,\n                      columnNumber: 27\n                    }, this)))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Modal, {\n                    isOpen: isDeleteModalOpen,\n                    toggle: toggleDeleteModal,\n                    children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n                      toggle: toggleDeleteModal,\n                      children: \"Confirm Delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 198,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n                      children: \"Are you sure you want to delete this product?\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 201,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n                      children: [/*#__PURE__*/_jsxDEV(Button, {\n                        color: \"danger\",\n                        onClick: confirmDelete,\n                        children: \"Delete\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 205,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Button, {\n                        color: \"secondary\",\n                        onClick: toggleDeleteModal,\n                        children: \"Cancel\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 208,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 204,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n                  pagination: pagination,\n                  handlerChangePage: handlerChangePage,\n                  totalPage: totalPage\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"footer text-center text-muted\",\n      children: [\"All Rights Reserved by Adminmart. Designed and Developed by\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"https://www.facebook.com/KimTien.9920/\",\n        children: \"Ti\\u1EC1n Kim\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Products, \"Egy8g3Vuv3+7Y8DRpNc0tkEC7PQ=\");\n\n_c = Products;\nexport default Products;\n\nvar _c;\n\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"sources":["/Volumes/document/GitHub/ASM3/Frontend Assignment 03/admin_shop/src/Products/Products.jsx"],"names":["React","useEffect","useState","queryString","ProductAPI","Pagination","Link","Modal","ModalHeader","ModalBody","ModalFooter","Button","Products","props","products","setProducts","temp","setTemp","total","setTotal","isDeleteModalOpen","setIsDeleteModalOpen","productToDeleteId","setProductToDeleteId","toggleDeleteModal","handleDeleteClick","productId","confirmDelete","deleteproduct","delete","pagination","setPagination","page","count","search","category","onChangeText","e","value","target","searchProducts","filter","item","name","toUpperCase","indexOf","totalPage","setTotalPage","handlerChangePage","fetchAllData","params","query","stringify","newQuery","getPagination","data","co","Math","ceil","parseInt","console","log","cursor","color","map","_id","price","img1","height","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport queryString from \"query-string\";\r\nimport ProductAPI from \"../API/ProductAPI\";\r\nimport Pagination from \"./Component/Pagination\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from 'reactstrap';\r\n\r\nfunction Products(props) {\r\n  const [products, setProducts] = useState([]);\r\n  const [temp, setTemp] = useState([]);\r\n  const [total, setTotal] = useState([]);\r\n\r\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n  const [productToDeleteId, setProductToDeleteId] = useState('');\r\n\r\n  const toggleDeleteModal = () => {\r\n    setIsDeleteModalOpen(!isDeleteModalOpen);\r\n  };\r\n\r\n  const handleDeleteClick = (productId) => {\r\n    setProductToDeleteId(productId);\r\n    toggleDeleteModal();\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    const deleteproduct = await ProductAPI.delete(productToDeleteId);\r\n    // Sau khi xóa thành công, bạn có thể cập nhật lại danh sách sản phẩm hoặc thực hiện các tương tác khác\r\n    toggleDeleteModal();\r\n  };\r\n\r\n  const [pagination, setPagination] = useState({\r\n    page: \"1\",\r\n    count: \"8\",\r\n    search: \"\",\r\n    category: \"all\",\r\n  });\r\n\r\n  const onChangeText = (e) => {\r\n    const value = e.target.value;\r\n    if (!value) {\r\n      setProducts(temp);\r\n      return;\r\n    }\r\n    const searchProducts = temp.filter(\r\n      (item) => item.name.toUpperCase().indexOf(value.toUpperCase()) !== -1\r\n    );\r\n    setProducts(searchProducts);\r\n  };\r\n\r\n  //Tổng số trang\r\n  const [totalPage, setTotalPage] = useState();\r\n\r\n  //Hàm này dùng để thay đổi state pagination.page\r\n  //Nó sẽ truyền xuống Component con và nhận dữ liệu từ Component con truyền lên\r\n  const handlerChangePage = (value) => {\r\n    setPagination({\r\n      page: value,\r\n      count: pagination.count,\r\n      category: pagination.category,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchAllData = async () => {\r\n      // Nếu mà category === 'all' thì nó sẽ gọi hàm get tất cả sản phẩm\r\n      // Ngược lại thì nó sẽ gọi hàm pagination và phân loại sản phẩm\r\n      const params = {\r\n        page: pagination.page,\r\n        count: pagination.count,\r\n        search: pagination.search,\r\n        category: pagination.category,\r\n      };\r\n\r\n      const query = queryString.stringify(params);\r\n\r\n      const newQuery = \"?\" + query;\r\n\r\n      const products = await ProductAPI.getPagination(newQuery);\r\n      setProducts(products.data.products);\r\n      setTemp(products.data.products);\r\n      setTotal(products.data.products);\r\n\r\n      //Tính tổng số trang = tổng số sản phẩm / số lượng sản phẩm 1 trang\r\n      co\r\n      const totalPage = Math.ceil(parseInt(total) / parseInt(pagination.count));\r\n      setTotalPage(totalPage);\r\n    };\r\n    fetchAllData();\r\n  }, [pagination]);\r\n\r\n  console.log(totalPage);\r\n\r\n  return (\r\n    <div className=\"page-wrapper\">\r\n      <div className=\"page-breadcrumb\">\r\n        <div className=\"row\">\r\n          <div className=\"col-7 align-self-center\">\r\n            <h4 className=\"page-title text-truncate text-dark font-weight-medium mb-1\">\r\n              Basic Initialisation\r\n            </h4>\r\n            <div className=\"d-flex align-items-center\">\r\n              <nav aria-label=\"breadcrumb\">\r\n                <ol className=\"breadcrumb m-0 p-0\">\r\n                  <li className=\"breadcrumb-item\">\r\n                    <a href=\"/\" className=\"text-muted\">\r\n                      Home\r\n                    </a>\r\n                  </li>\r\n                  <li\r\n                    className=\"breadcrumb-item text-muted active\"\r\n                    aria-current=\"page\"\r\n                  >\r\n                    Table\r\n                  </li>\r\n                </ol>\r\n              </nav>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row\">\r\n          <div className=\"col-12\">\r\n            <div className=\"card\">\r\n              <div className=\"card-body\">\r\n                <h4 className=\"card-title\">Products</h4>\r\n                <div className=\"d-flex justify-content-between\">\r\n                  <input\r\n                    className=\"form-control w-25\"\r\n                    onChange={onChangeText}\r\n                    type=\"text\"\r\n                    placeholder=\"Enter Search!\"\r\n                  />\r\n                  <a\r\n                    href={\"/products/view-edit\"}\r\n                    style={{ cursor: \"pointer\", color: \"white\" }}\r\n                    className=\"btn btn-success\"\r\n                  >\r\n                    Create Product\r\n                  </a>\r\n                </div>\r\n\r\n                <br />\r\n                <div className=\"table-responsive\">\r\n                  <table className=\"table table-striped table-bordered no-wrap\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>ID</th>\r\n                        <th>Name</th>\r\n                        <th>Price</th>\r\n                        <th>Image</th>\r\n                        <th>Category</th>\r\n                        <th>Edit</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {products &&\r\n                        products?.map((value) => (\r\n                          <tr key={value._id}>\r\n                            <td>{value._id}</td>\r\n                            <td>{value.name}</td>\r\n                            <td>{value.price}</td>\r\n                            <td>\r\n                              <img\r\n                                src={value.img1}\r\n                                style={{ height: \"60px\", width: \"60px\" }}\r\n                                alt=\"\"\r\n                              />\r\n                            </td>\r\n                            <td>{value.category}</td>\r\n                            <td>\r\n                              <a\r\n                                href={`/products/view-edit/${value._id}`}\r\n                                style={{ cursor: \"pointer\", color: \"white\" }}\r\n                                className=\"btn btn-success\"\r\n                              >\r\n                                Update\r\n                              </a>\r\n                              &nbsp;\r\n                              <a\r\n                                onClick={() => handleDeleteClick(value._id)} // Sử dụng hàm xử lý xóa khi nhấp vào nút \"Delete\"\r\n                                style={{\r\n                                  cursor: \"pointer\",\r\n                                  color: \"white\",\r\n                                }}\r\n                                className=\"btn btn-danger\"\r\n                              >\r\n                                Delete\r\n                              </a>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                    </tbody>\r\n                    <Modal\r\n                      isOpen={isDeleteModalOpen}\r\n                      toggle={toggleDeleteModal}\r\n                    >\r\n                      <ModalHeader toggle={toggleDeleteModal}>\r\n                        Confirm Delete\r\n                      </ModalHeader>\r\n                      <ModalBody>\r\n                        Are you sure you want to delete this product?\r\n                      </ModalBody>\r\n                      <ModalFooter>\r\n                        <Button color=\"danger\" onClick={confirmDelete}>\r\n                          Delete\r\n                        </Button>\r\n                        <Button color=\"secondary\" onClick={toggleDeleteModal}>\r\n                          Cancel\r\n                        </Button>\r\n                      </ModalFooter>\r\n                    </Modal>\r\n                  </table>\r\n                  <Pagination\r\n                    pagination={pagination}\r\n                    handlerChangePage={handlerChangePage}\r\n                    totalPage={totalPage}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <footer className=\"footer text-center text-muted\">\r\n        All Rights Reserved by Adminmart. Designed and Developed by{\" \"}\r\n        <a href=\"https://www.facebook.com/KimTien.9920/\">Tiền Kim</a>.\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Products;\r\n"]},"metadata":{},"sourceType":"module"}